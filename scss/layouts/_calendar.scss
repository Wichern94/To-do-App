@use "../variables/variables" as var;
@use "../variables/mixins";
@use "sass:map";

.calendar__section {
  @include mixins.flex;
}

.calendar {
  --nav-w: 1.2rem;
  --months-rail: 50%;

  @include mixins.flex($width: 100%);
  font-family: var.$mainFont;
  color: var.$textSecondary;
  top: 4rem;
  min-width: 0;
  &__bar {
    display: grid;
    grid-template-columns: minmax(0, var(--months-rail)) minmax(0, 1fr);
    grid-template-rows: auto auto;
    padding-inline: 2rem;
    column-gap: 2.75rem;
    align-items: center;
    inline-size: 100%;
    min-width: 0;
  }

  //months
  &__months {
    display: grid;
    grid-column: 1;
    grid-row: 1 / span 2;
    grid-template-columns: var(--nav-w) 1fr var(--nav-w);
    min-width: 0;

    align-items: center;
    gap: 0.5rem;
    &-nav {
      grid-row: 1;
      inline-size: var(--nav-w);
      &--prev {
        grid-column: 1;
      }
      &--next {
        grid-column: 3;
      }
    }

    &-carousel {
      grid-column: 2;
      min-width: 0;
      @include mixins.set-text("main", "medium", "xl");
      @include mixins.horizontal-carousel();

      scroll-snap-type: x mandatory;
      > * {
        scroll-snap-align: center;
      }
      overscroll-behavior-x: contain;
      scroll-padding-inline: 0px;

      &-month {
        flex: 0 0 100%;
        display: flex;
        justify-content: center;
        text-align: center;
        padding-block: 0.25rem;
        scroll-snap-stop: always;

        &--active {
          color: var.$accentLight;
          text-decoration: underline;
          text-underline-offset: 0.4rem;
          display: flex;
          text-align: center;
          justify-content: center;
        }
      }
    }
  }
  &__meta {
    @include mixins.flex($direction: column-reverse);
  }
  &__week {
    display: grid;
    grid-column: 2;
    grid-row: 1;
    justify-content: center;
    min-width: 0;
    @include mixins.set-text("secondary", "light", "sm");
  }
  &__year {
    display: grid;
    grid-column: 2;
    grid-row: 2;
    white-space: nowrap;
    letter-spacing: 0.02em;
    @include mixins.set-text("main", "bold", "xl");
  }
  //days
  &__days {
    @include mixins.flex($direction: row, $width: 100%);
    margin: 1rem 0;
    overflow-x: auto;
    &-selector {
      @include mixins.flex(
        $direction: row,
        $width: 90%,
        $justify: space-between
      );
    }
  }
  //Hour grid
  &__grid {
    position: relative;
    height: calc(100vh - 25rem);
    overflow-y: auto;
    scroll-snap-type: y mandatory;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
    width: 80%;
    margin-top: 0.5rem;
    scrollbar-width: none;
    -ms-overflow-style: none;
    &::-webkit-scrollbar {
      display: none;
    }
    &-list {
      padding-top: 0.5rem;
      position: relative;
      display: grid;
      grid-template-rows: repeat(17, 4rem);
      row-gap: 1px;
      border-top: 1px solid var.$divider;
      border-image: linear-gradient(to left, transparent 1%, var.$divider) 1;
    }

    &-hour-slot {
      scroll-snap-align: start;
      position: relative;
      padding-left: 1rem;
      display: flex;
      align-items: center;
      font-size: 14px;
      color: var.$textSecondary;
      border-bottom: 1px solid var.$divider;
      border-image: linear-gradient(to left, transparent 1%, var.$divider) 1;
    }
  }
}
